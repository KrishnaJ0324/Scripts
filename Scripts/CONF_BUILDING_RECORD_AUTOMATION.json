{
  "Building/Street Cut/Tree_Removal/NA": {
    "WorkflowTaskUpdateAfter": [
      {
        "metadata": {
          "description": "Automatically assess a fee when the Completeness Check task is set to Correction Required",
          "operators": {}
        },
        "preScript": "",
        "criteria": {
          "allowBalance": false,
          "task": [
            "Completeness Check"
          ],
          "status": [
            "Correction Required"
          ]
        },
        "action": {
          "assessFees": [
            {
              "feeSchedule": "ABC_ARTS_APP",
              "feeCode": "ABCARTSA02",
              "feeQuantity": 1,
              "feeInvoice": "Y",
              "feePeriod": "FINAL"
            }
          ]
        },
        "postScript": ""
      }
    ]
  },
  "Building/Electrical/Residential/NA": {
    "WorkflowTaskUpdateAfter": [
      {
        "metadata": {
          "description": "Assess a re-inspection fee for failed electrical inspections",
          "operators": {}
        },
        "preScript": "if (wfTask == 'Electrical Inspection' && wfStatus == 'Failed') { // logic to check if re-inspection fee already exists }",
        "criteria": {
          "allowBalance": false,
          "task": [
            "Electrical Inspection"
          ],
          "status": [
            "Failed"
          ]
        },
        "action": {
          "assessFees": [
            {
              "feeSchedule": "ELEC_INSP",
              "feeCode": "ELEC_REINSP",
              "feeQuantity": 1,
              "feeInvoice": "Y",
              "feePeriod": "FINAL"
            }
          ]
        },
        "postScript": "logAction('Re-inspection fee assessed for failed electrical inspection.'); UPDATED"
      }
    ]
  },
  "Building/plumbing/Residential/NA": {
    "WorkflowTaskUpdateAfter": [
      {
        "metadata": {
          "description": "Assess a re-inspection fee for failed electrical inspections",
          "operators": {}
        },
        "preScript": "if (wfTask == 'Electrical Inspection' && wfStatus == 'Failed') { // logic to check if re-inspection fee already exists }",
        "criteria": {
          "allowBalance": false,
          "task": [
            "Electrical Inspection"
          ],
          "status": [
            "Failed"
          ]
        },
        "action": {
          "assessFees": [
            {
              "feeSchedule": "ELEC_INSP",
              "feeCode": "ELEC_REINSP",
              "feeQuantity": 1,
              "feeInvoice": "Y",
              "feePeriod": "FINAL"
            }
          ]
        },
        "postScript": "logAction('Re-inspection fee assessed for failed electrical inspection.'); UPDATED"
      }
    ]
  },
  "Planning/Residential/New/NA": {
    "WorkflowTaskUpdateAfter": [
      {
        "metadata": {
          "description": "When Zoning Review is 'Approved with Conditions', update ASI and notify, but only if fees are paid.",
          "operators": {}
        },
        "preScript": "if (balanceDue > 0) { cancel = true; showMessage = true; comment('All fees must be paid before this task can be approved.'); }",
        "criteria": {
          "task": [
            "Zoning Review"
          ],
          "status": [
            "Approved with Conditions"
          ]
        },
        "action": {
          "updateASI": {
            "asiGroup": "ZONING_INFO",
            "asiSubGroup": null,
            "asiLabel": "Review Outcome",
            "asiValue": "Approved with Conditions"
          },
          "notifications": [
            {
              "type": "email",
              "template": "PLN_ZONING_CONDITIONS",
              "recipients": [
                "applicant",
                "owner"
              ]
            }
          ]
        },
        "postScript": "logDebug('Updated ASI and sent notification for conditional approval.');"
      }
    ]
  }
}